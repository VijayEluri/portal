<project default="dist">
<!-- 

1. Make sure that you have a Java SDK keytool and jarsigner in your path. These tools are located in the Java SDK bin directory.

2. Create a new key in a new keystore as follows:

  keytool -genkey -keystore myKeystore -alias myself
	
You will be prompted for information regarding the new key, such as password, name, etc. This will create the myKeystore file on disk.

3. Then create a self-signed test certificate as follows:

  keytool -selfcert -alias myself -keystore myKeystore

This will prompt you for a password. Generating the certificate may take a few minutes.

4. Check to make sure that everything is okay. To list the contents of the keystore, use this command:

  keytool -list -keystore myKeystore

5. run this script

http://wiki.plexinfo.net/index.php?title=How_to_sign_JAR_files
	
	 -->
	<property name="project_version" location="1.0-rc2"/>
	 
	<target name="dist">
		<delete dir="target/jnlp/"/>
		
		<unzip dest="target/jnlp/unjar/">
	  	    <fileset dir="target/devproof-portal-${project_version}/WEB-INF/lib/">
	  	        <include name="*.jar"/>
	  	    </fileset>
	  	</unzip>
	  	
	  	<copy file="config/jnlp/devproof-modules.txt" tofile="target/jnlp/unjar/devproof-modules.txt"/>
	  	<copy file="target/sql/install_devproof_hsql.sql" tofile="target/jnlp/unjar/sql/install_devproof_hsql.sql"/>
	  	
	  	<mkdir dir="target/jnlp/dist/"/>
	  	<jar destfile="target/jnlp/dist/devproof-portal.jar"  basedir="target/jnlp/unjar/"/>		
		<signjar jar="target/jnlp/dist/devproof-portal.jar" 
			alias="devproof" storepass="testen" keystore="config/jnlp/keystore"/>
		<copy file="config/jnlp/devproof-portal.jnlp" tofile="target/jnlp/dist/devproof-portal.jnlp"/>
	</target>
</project> 